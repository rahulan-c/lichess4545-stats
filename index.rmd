---
title: "Lichess4545 stats homepage"
output: md_document
date: "Last updated: `r format(Sys.time(), '%B %Y')`"
---

```{r, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)

if (!require("pacman")) install.packages("pacman")
pacman::p_load(tidyverse, knitr)

```

A repository of statistics related to the Lichess4545 online chess leagues.

## Season statistics and awards

```{r season_reports_tbl}

# Identify all seasons for which stats reports have been compiled 

# 4545
completed_4545 <- list.files(path = "reports/", pattern = "^stats_4545(.*)\\.html$") 
any_4545 <- ifelse(length(completed_4545) > 0, T, F)
if(length(completed_4545) > 0){
  completed_4545 <- completed_4545 %>% 
    str_remove_all("stats_4545_s") %>% 
    str_remove_all("\\.html") %>% 
    sort(decreasing = T) %>% 
    paste0("[Season ", ., "]", "(https://rahulan-c.github.io/lichess4545-stats/reports/stats_4545_s", ., ".html)")
}

# LW Open
completed_lwopen <- list.files(path = "reports/", pattern = "^stats_lwopen(.*)\\.html$")
any_lwopen <- ifelse(length(completed_lwopen) > 0, T, F)
if(length(completed_lwopen) > 0){
  completed_lwopen <- completed_lwopen %>% 
    str_remove_all("stats_lwopen_s") %>% 
    str_remove_all("\\.html") %>% 
    sort(decreasing = T) %>% 
    paste0("[Season ", ., "]", "(https://rahulan-c.github.io/lichess4545-stats/reports/stats_lwopen_s", ., ".html)")
}

# LW U1800
completed_lwu1800 <- list.files(path = "reports/", pattern = "^stats_lwu1800(.*)\\.html$")
any_lwu1800 <- ifelse(length(completed_lwu1800) > 0, T, F)
if(length(completed_lwu1800) > 0){
 completed_lwu1800 <- completed_lwu1800 %>%  
   str_remove_all("stats_lwu1800_s") %>% 
   str_remove_all("\\.html") %>% 
   sort(decreasing = T) %>% 
   paste0("[Season ", ., "]", "(https://rahulan-c.github.io/lichess4545-stats/reports/stats_lwu1800_s", ., ".html)")
}

# Make sure all completed season vectors are the same length
most_completed <- max(c(length(completed_4545), 
                      length(completed_lwopen), 
                      length(completed_lwu1800)))

if(length(completed_4545) < most_completed){
  completed_4545 <- c(completed_4545, rep("", most_completed - length(completed_4545)))
}

if(length(completed_lwopen) < most_completed){
  completed_lwopen <- c(completed_lwopen, rep("", most_completed - length(completed_lwopen)))
}

if(length(completed_lwu1800) < most_completed){
  completed_lwu1800 <- c(completed_lwu1800, rep("", most_completed - length(completed_lwu1800)))
}

# Make league cols empty if there are no completed seasons
if(any_4545 == F){completed_4545 <- rep("", most_completed)}
if(any_lwopen == F){completed_lwopen <- rep("", most_completed)}
if(any_lwu1800 == F){completed_lwu1800 <- rep("", most_completed)}

# Construct and show table of league reports by season
completed <- tibble("team4545" = completed_4545,
                    "lwopen" = completed_lwopen,
                    "lwu1800" = completed_lwu1800)
knitr::kable(completed, format = "simple", col.names = c("Lichess4545 League", "Lichess LoneWolf (Open)", "Lichess LoneWolf (U1800)"))

```

## Recent updates

Date                     | Description
:----------------------- | :-
2021-08-15               | Updated home page: added recent / future updates and contact form.  
2021-08-09               | Revisions made to the treatment of banned players and some plots/tables. Added two new awards (Rookie and Egalitarian), season forfeit rates, and several explanatory footnotes.
2021-08-04               | Updates; first full set of season reports published.
2021-08-02               | Updates; first set of season reports republished.
2021-07-30               | First reports published.


## Planned updates

Here's a brief list of planned updates that I'm either actively working on or have on my 'to do' list. Many of them have been suggested by other Lichess4545 members. If there's something you'd like to see, please get in touch using the contact form below. Nothing is impossible...except maybe identifying piece sacrifices :)

**Planned updates to existing reports**
 
- Showing images of knight/pawn checkmates `in progress`
- Identifying game(s) that stayed in "theory" the longest `in progress`
- Visualising important team matches (or matches that went to the wire) `in progress`
- Showing players that ended up with more time than they began with
- Stats by endgame
- Improving gambit-related stats

**Other planned updates** 

- Presenting all-time 4545 and LoneWolf stats and records `in progress`
- Allowing users to search for any mentions across all season reports
- Presenting similar stats for other Lichess4545 community leagues such as Rapid Battle and Series



## Contact me

Please use the form below to provide any comments, suggestions or bug reports.

```{=html}
<form method="post" action="https://forms.un-static.com/forms/c65e8c7acaf8b132767fee1fba923d3d07b959c5">
  <div class="form-group row">
    <label for="name" class="col-4 col-form-label">Name</label>
    <div class="col-8">
      <div class="input-group">
        <div class="input-group-addon">
          <i class="fa fa-user"></i>
        </div>
        <input id="name" name="name" placeholder="Please enter your name" type="text" required="required" class="form-control">
      </div>
    </div>
  </div>
  <div class="form-group row">
    <label for="email" class="col-4 col-form-label">E-mail address</label>
    <div class="col-8">
      <div class="input-group">
        <div class="input-group-addon">
          <i class="fa fa-envelope"></i>
        </div>
        <input id="email" name="email" placeholder="Your e-mail address" type="text" class="form-control">
      </div>
    </div>
  </div>
  <div class="form-group row">
    <label for="message" class="col-4 col-form-label">Message</label>
    <div class="col-8">
      <textarea id="message" name="message" cols="40" rows="10" required="required" class="form-control"></textarea>
    </div>
  </div>
  <div class="form-group row">
    <div class="offset-4 col-8">
      <button name="submit" type="submit" class="button">Send</button>
    </div>
  </div>
</form>
<div align="center">
  <p><small>(Powered by <a rel="nofollow" href="https://un-static.com/">Un-static Forms</a>)</small></p>
</div>
```



*`r paste0("Site last updated at ", format(Sys.time(), '%X %Z'), " on ", format(Sys.time(), '%a %d %b %Y'))`.*
